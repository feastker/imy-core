# –ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ IMY Core

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## –û–±–∑–æ—Ä

–ö–ª–∞—Å—Å `IndexAnalyzer` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `DB`, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**: –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `DB::query()` –∏–ª–∏ `DB::exec()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑
2. **–ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤**: –°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∞–±–ª–∏—Ü–∞—Ö, WHERE —É—Å–ª–æ–≤–∏—è—Ö, JOIN'–∞—Ö, ORDER BY –∏ GROUP BY
3. **–ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏, –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**: –ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π
6. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–∞–Ω–µ–ª–∏ –æ—Ç–ª–∞–¥–∫–∏**: –í—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ç–∞–±–µ "–ò–Ω–¥–µ–∫—Å—ã" —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏ –≤—Å–µ–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏

## –¢–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### WHERE —É—Å–ª–æ–≤–∏—è
- **–†–∞–≤–µ–Ω—Å—Ç–≤–æ** (`=`, `!=`): –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
- **LIKE** (`LIKE '%text%'`): –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **IN** (`IN (1,2,3)`): –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **BETWEEN** (`BETWEEN start AND end`): –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### JOIN —É—Å–ª–æ–≤–∏—è
- **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏**: –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- **–£—Å–ª–æ–≤–∏—è —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞**: –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### ORDER BY
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

### GROUP BY
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**: –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- WHERE —É—Å–ª–æ–≤–∏—è —Å —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ–º
- JOIN —É—Å–ª–æ–≤–∏—è
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- WHERE —É—Å–ª–æ–≤–∏—è —Å LIKE, BETWEEN
- ORDER BY –∫–æ–ª–æ–Ω–∫–∏
- –£–º–µ—Ä–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- GROUP BY –∫–æ–ª–æ–Ω–∫–∏
- –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏

## –¢–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤

### –û–¥–∏–Ω–æ—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
–°–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
```sql
CREATE INDEX idx_users_email ON users (email);
```

### –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
–°–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∫–æ–ª–æ–Ω–æ–∫:
```sql
CREATE INDEX idx_posts_user_published ON posts (user_id, published);
```

## –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ `INFORMATION_SCHEMA.STATISTICS`.

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- **–ü—Ä—è–º–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –ï—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏—Ö –∂–µ –∫–æ–ª–æ–Ω–æ–∫
- **–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–∂–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–¥–µ–∫—Å –Ω–∞ `(a, b, c)` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ `(a, b)`)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ**: –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω–¥–µ–∫—Å –Ω–µ –Ω–∞–π–¥–µ–Ω

### –°—Ç–∞—Ç—É—Å—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **`missing`**: –ò–Ω–¥–µ–∫—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫ —Å–æ–∑–¥–∞–Ω–∏—é
- **`exists`**: –ò–Ω–¥–µ–∫—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–µ–º

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–ª–∞—Å—Å–∞ `DB`:

```php
use Imy\Core\DB;

// –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
$result = DB::getInstance()->query("SELECT * FROM users WHERE email = ?", ['test@example.com']);
```

### –†—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑
–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é:

```php
use Imy\Core\IndexAnalyzer;

IndexAnalyzer::analyzeQuery("SELECT * FROM users WHERE active = 1");
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
```php
use Imy\Core\Debug;

// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
$missing_recommendations = Debug::getIndexRecommendations();

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
$all_recommendations = Debug::getAllIndexRecommendations();

// –ü–æ–ª—É—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
$existing_indexes = Debug::getExistingIndexes();

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
$stats = Debug::getIndexStats();
```

### –†–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
```php
use Imy\Core\IndexAnalyzer;

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∏–Ω–¥–µ–∫—Å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
$index_exists = IndexAnalyzer::indexExists('users', ['email', 'active']);
if ($index_exists) {
    echo "–ò–Ω–¥–µ–∫—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: " . $index_exists['name'];
} else {
    echo "–ò–Ω–¥–µ–∫—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç";
}

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
$table_indexes = IndexAnalyzer::getTableIndexes('users');

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
$all_existing = IndexAnalyzer::getExistingIndexes();
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –í –ø–∞–Ω–µ–ª–∏ –æ—Ç–ª–∞–¥–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏ (–∏–∫–æ–Ω–∫–∞ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Ç–∞–± "–ò–Ω–¥–µ–∫—Å—ã"
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–∞–±—ã –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É:
   - **–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ** - —Ç–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
   - **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ** - –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - **–í—Å–µ** - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å –≥–æ—Ç–æ–≤—ã–º–∏ SQL –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```php
$recommendations = Debug::getIndexRecommendations();

foreach ($recommendations as $rec) {
    echo "–¢–∞–±–ª–∏—Ü–∞: " . $rec['table'] . "\n";
    echo "–ö–æ–ª–æ–Ω–∫–∏: " . $rec['columns'] . "\n";
    echo "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: " . $rec['priority'] . "\n";
    echo "–ü—Ä–∏—á–∏–Ω–∞: " . $rec['reason'] . "\n";
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π: " . $rec['usage_count'] . "\n";
    echo "---\n";
}
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ SQL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ **SELECT –∑–∞–ø—Ä–æ—Å—ã** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **UNION –∑–∞–ø—Ä–æ—Å—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ SELECT'—ã
- ‚úÖ **–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã** - –∞–Ω–∞–ª–∏–∑ WHERE EXISTS, IN (SELECT...), NOT EXISTS
- ‚úÖ **–ê–ª–∏–∞—Å—ã —Ç–∞–±–ª–∏—Ü** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `table AS alias`
- ‚úÖ **–°–ª–æ–∂–Ω—ã–µ JOIN'—ã** - LEFT, RIGHT, INNER, OUTER, CROSS JOIN
- ‚úÖ **HAVING —É—Å–ª–æ–≤–∏—è** - –∞–Ω–∞–ª–∏–∑ —É—Å–ª–æ–≤–∏–π –ø–æ—Å–ª–µ GROUP BY
- ‚úÖ **–§—É–Ω–∫—Ü–∏–∏ –≤ ORDER BY/GROUP BY** - COUNT(column), MAX(column) –∏ –¥—Ä.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ WHERE —É—Å–ª–æ–≤–∏—è
- ‚úÖ **–†–∞–≤–µ–Ω—Å—Ç–≤–æ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ** - `=`, `!=`, `<>`, `>`, `<`, `>=`, `<=`
- ‚úÖ **LIKE** - –ø–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω—É
- ‚úÖ **IN** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫
- ‚úÖ **BETWEEN** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- ‚úÖ **IS NULL / IS NOT NULL** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ NULL
- ‚úÖ **EXISTS / NOT EXISTS** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
- ‚úÖ **REGEXP** - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ **–°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è** - —Å–∫–æ–±–∫–∏, AND/OR —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
- ‚úÖ **–ö–∞–≤—ã—á–∫–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤

### –£–ª—É—á—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ **–£–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π** - —É—á–µ—Ç —Å–∫–æ–±–æ–∫ –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–≤—ã—á–µ–∫** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π** - COUNT(column) ‚Üí column
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª–∏–∞—Å–æ–≤** - table.column ‚Üí column
- ‚úÖ **–ê–Ω–∞–ª–∏–∑ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤** - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–°–ª–æ–∂–Ω—ã–µ SQL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ SQL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –º–æ–≥—É—Ç –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–¢–æ–ª—å–∫–æ SELECT**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã (INSERT, UPDATE, DELETE –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è)
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê–Ω–∞–ª–∏–∑ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–±–æ–ª—å—à—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
4. **–ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤**: –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î
5. **–ß–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è**: –°–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- [x] –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- [x] –£–ª—É—á—à–µ–Ω–Ω—ã–π SQL –ø–∞—Ä—Å–µ—Ä
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ (INSERT, UPDATE, DELETE)
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EXPLAIN
- [x] –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–¥–∞–ª–µ–Ω–∏—é –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤ —Ñ–∞–π–ª
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CTE (Common Table Expressions)
- [ ] –ê–Ω–∞–ª–∏–∑ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (OVER, PARTITION BY)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EXPLAIN

### –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç–µ–ø–µ—Ä—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å EXPLAIN –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞–Ω–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –°–£–ë–î

#### MySQL
- **EXPLAIN FORMAT=JSON** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ê–Ω–∞–ª–∏–∑ access_type** - ALL, INDEX, RANGE, REF, EQ_REF
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–æ–∫–∞—Ö** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- **–ê–Ω–∞–ª–∏–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å WHERE —É—Å–ª–æ–≤–∏–π

#### PostgreSQL
- **EXPLAIN (FORMAT JSON)** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –ø–æ–ª–Ω—ã–π –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Node Type –∞–Ω–∞–ª–∏–∑** - Seq Scan, Index Scan, Hash Join
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏** - startup_cost, total_cost

#### SQLite
- **EXPLAIN QUERY PLAN** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞–Ω–µ –∑–∞–ø—Ä–æ—Å–∞
- **–ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

### –¢–∏–ø—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ EXPLAIN

#### üî¥ –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- **–£—Å–ª–æ–≤–∏–µ**: access_type = 'ALL', 'FULL TABLE SCAN', 'SEQ SCAN'
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π
- **–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è WHERE —É—Å–ª–æ–≤–∏–π
- **–ü—Ä–∏–º–µ—Ä**: `CREATE INDEX idx_users_email ON users (email);`

#### üü° –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
- **–£—Å–ª–æ–≤–∏–µ**: –ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ (>100)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ä–µ–¥–Ω–∏–π
- **–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- **–ü—Ä–∏–º–µ—Ä**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ –≤ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å

#### üü¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
- **–£—Å–ª–æ–≤–∏–µ**: –ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (<100 —Å—Ç—Ä–æ–∫)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ò–Ω–¥–µ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ

#### ‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞
- **–£—Å–ª–æ–≤–∏–µ**: –ù–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π access_type
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–∏–∑–∫–∏–π
- **–î–µ–π—Å—Ç–≤–∏–µ**: –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ EXPLAIN –∞–Ω–∞–ª–∏–∑–∞

```php
// –í–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ EXPLAIN (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω)
Debug::setExplainEnabled(true);

// –û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ EXPLAIN
Debug::setExplainEnabled(false);

// –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã EXPLAIN –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
$explain_results = Debug::getExplainResults($sql, 'default');

if ($explain_results) {
    echo "–¢–∏–ø –¥–æ—Å—Ç—É–ø–∞: " . $explain_results['tables'][0]['access_type'];
    echo "–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç—Ä–æ–∫: " . $explain_results['tables'][0]['rows_examined'];
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö EXPLAIN

```php
[
    'tables' => [
        [
            'table_name' => 'users',
            'access_type' => 'ALL',
            'index_name' => null,
            'rows_examined' => 1000,
            'cost_info' => [
                'startup_cost' => 0,
                'total_cost' => 100
            ],
            'filter_condition' => 'email LIKE "%@example.com"',
            'index_condition' => null
        ]
    ],
    'cost_info' => [
        'query_cost' => '100.00'
    ],
    'warnings' => []
]
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

EXPLAIN –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö SELECT –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏:
- –í–∫–ª—é—á–µ–Ω –∞–Ω–∞–ª–∏–∑ EXPLAIN (`setExplainEnabled(true)`)
- –î–æ—Å—Ç—É–ø–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—Ä–æ—Å —è–≤–ª—è–µ—Ç—Å—è SELECT

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è EXPLAIN

1. **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î** - –∞–Ω–∞–ª–∏–∑ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. **–¢–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã** - DML –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ EXPLAIN
3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –°–£–ë–î** - —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –°–£–ë–î
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ EXPLAIN —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤—ã—è–≤–ª—è–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### ‚è±Ô∏è –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è** - –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ SQL –∑–∞–ø—Ä–æ—Å–∞
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è SQL –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### üêå –î–µ—Ç–µ–∫—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä–æ–≥** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000ms (1 —Å–µ–∫—É–Ω–¥–∞)
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - —Å—Ä–µ–¥–Ω–µ–µ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

#### üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - —Å—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

#### üìà –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤
- **–õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è** - –≤—ã—è–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞** - –∞–Ω–∞–ª–∏–∑ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å, –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é
- **–£—Ö—É–¥—à–µ–Ω–∏–µ/—É–ª—É—á—à–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```php
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥ –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
Debug::setSlowQueryThreshold(500); // 500ms

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
$stats = Debug::getPerformanceStats();
echo "–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: " . $stats['total_queries'];
echo "–ú–µ–¥–ª–µ–Ω–Ω—ã—Ö: " . $stats['slow_queries'];
echo "–ü—Ä–æ—Ü–µ–Ω—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö: " . $stats['slow_query_percentage'] . "%";

// –ü–æ–ª—É—á–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
$slow_queries = Debug::getSlowQueries(10);
foreach ($slow_queries as $query) {
    echo "SQL: " . $query['normalized_sql'];
    echo "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: " . $query['avg_time'] . "ms";
}

// –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–µ–Ω–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
$trends = Debug::getPerformanceTrends(3600); // –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
foreach ($trends as $trend) {
    if ($trend['trend'] > 0.1) {
        echo "–ó–∞–ø—Ä–æ—Å –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è: " . $trend['normalized_sql'];
    }
}

// –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
$recommendations = Debug::getPerformanceRecommendations();
foreach ($recommendations as $rec) {
    echo $rec['title'] . ": " . $rec['suggestion'];
}
```

### –¢–∏–ø—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** (>20%)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

#### üü° –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ–µ** (>50% –æ—Ç –ø–æ—Ä–æ–≥–∞)
- **–£—Ö—É–¥—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (—Ç—Ä–µ–Ω–¥ >0.1)

#### ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è SQL

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```sql
-- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SELECT * FROM users WHERE id = 1
SELECT * FROM users WHERE id = 2
SELECT * FROM users WHERE id = 3

-- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
SELECT * FROM users WHERE id = ?
```

**–ü—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–º–µ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–∞–≤—ã—á–∫–∞—Ö –Ω–∞ `?`
- –ó–∞–º–µ–Ω–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ `?`
- –ó–∞–º–µ–Ω–∞ IN —Å–ø–∏—Å–∫–æ–≤ –Ω–∞ `IN (?)`
- –ó–∞–º–µ–Ω–∞ LIMIT/OFFSET –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ `?`
- –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```php
[
    'total_queries' => 150,
    'total_time' => 2500.5,
    'avg_time' => 16.67,
    'min_time' => 1.2,
    'max_time' => 450.8,
    'slow_queries' => 12,
    'slow_query_percentage' => 8.0,
    'unique_queries' => 25,
    'slow_query_threshold' => 1000
]
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –ø–∞–Ω–µ–ª–∏ –æ—Ç–ª–∞–¥–∫–∏

–ù–æ–≤—ã–π —Ç–∞–± "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å" –≤–∫–ª—é—á–∞–µ—Ç:

- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **üêå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - —Å–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **üìà –¢—Ä–µ–Ω–¥—ã** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–º—è—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–∞–º—è—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫:

#### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤
```php
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –ø–∞–º—è—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)
Debug::setMaxPerformanceEntries(500);

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –Ω–∞ –∑–∞–ø—Ä–æ—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
Debug::setMaxExecutionsPerQuery(50);

// –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
Debug::clearPerformanceData();
```

#### üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- **–õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π** - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è 20% —Å–∞–º—ã—Ö —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **–õ–∏–º–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –º–∞–∫—Å–∏–º—É–º N –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏** - –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ >80% –ø–∞–º—è—Ç–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ–ª–æ–≤–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö
- **–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** - –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```php
// –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
Debug::setMaxPerformanceEntries(200);
Debug::setMaxExecutionsPerQuery(20);

// –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ)
Debug::setMaxPerformanceEntries(1000);
Debug::setMaxExecutionsPerQuery(100);

// –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ)
Debug::setMaxPerformanceEntries(50);
Debug::setMaxExecutionsPerQuery(10);
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ü–∞–º—è—Ç—å** - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–¢–æ—á–Ω–æ—Å—Ç—å** - –≤—Ä–µ–º—è –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∞–Ω–∞–ª–∏–∑
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
```sql
SELECT * FROM users WHERE email = 'test@example.com'
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: `CREATE INDEX idx_users_email ON users (email);`

### –ó–∞–ø—Ä–æ—Å —Å JOIN
```sql
SELECT u.name, p.title 
FROM users u 
JOIN posts p ON u.id = p.user_id 
WHERE u.active = 1
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- `CREATE INDEX idx_users_active ON users (active);`
- `CREATE INDEX idx_posts_user_id ON posts (user_id);`

### –°–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```sql
SELECT u.name, p.title, COUNT(c.id) as comment_count
FROM users u
JOIN posts p ON u.id = p.user_id
LEFT JOIN comments c ON p.id = c.post_id
WHERE u.active = 1 AND p.published = 1
GROUP BY u.id, p.id
ORDER BY p.created_at DESC
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- `CREATE INDEX idx_users_active ON users (active);`
- `CREATE INDEX idx_posts_user_published ON posts (user_id, published);`
- `CREATE INDEX idx_comments_post_id ON comments (post_id);`
- `CREATE INDEX idx_posts_created_at ON posts (created_at);`

### –ó–∞–ø—Ä–æ—Å —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏ (—É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä)
```sql
SELECT * FROM users 
WHERE id IN (
    SELECT user_id FROM posts 
    WHERE published = 1 AND created_at > '2023-01-01'
) AND EXISTS (
    SELECT 1 FROM comments c 
    WHERE c.user_id = users.id AND c.approved = 1
)
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- `CREATE INDEX idx_posts_published_created ON posts (published, created_at);`
- `CREATE INDEX idx_comments_user_approved ON comments (user_id, approved);`

### UNION –∑–∞–ø—Ä–æ—Å (—É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä)
```sql
SELECT id, name, 'user' as type FROM users WHERE active = 1
UNION
SELECT id, title, 'post' as type FROM posts WHERE published = 1
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π SELECT –æ—Ç–¥–µ–ª—å–Ω–æ):
- `CREATE INDEX idx_users_active ON users (active);`
- `CREATE INDEX idx_posts_published ON posts (published);`

### –ó–∞–ø—Ä–æ—Å —Å HAVING (—É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä)
```sql
SELECT user_id, COUNT(*) as post_count 
FROM posts 
GROUP BY user_id 
HAVING COUNT(*) > 5 AND user_id IN (1, 2, 3)
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- `CREATE INDEX idx_posts_user_id ON posts (user_id);`

### –ó–∞–ø—Ä–æ—Å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤ ORDER BY (—É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä)
```sql
SELECT * FROM posts 
ORDER BY COUNT(comments.id) DESC, created_at ASC
```
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- `CREATE INDEX idx_posts_created_at ON posts (created_at);`
